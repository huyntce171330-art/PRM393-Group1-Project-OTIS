00:00 +0: loading D:/04_Semester_08/01_PRM393/03_Projects/PRM393-OTIS-Project/app/test/presentation/bloc/admin_product/admin_product_detail_bloc_test.dart
00:00 +0: AdminProductBloc - Detail Initial State initial state should be AdminProductInitial
00:00 +1: AdminProductBloc - Detail Initial State isDetailLoading should be false initially
00:00 +2: AdminProductBloc - Detail Initial State isDetailLoaded should be false initially
00:00 +3: AdminProductBloc - Detail Initial State detailProduct should return null initially
00:00 +4: AdminProductBloc - Detail Initial State isInitial should be true initially
00:00 +5: AdminProductBloc - Detail Initial State isLoading should be false initially
00:00 +6: AdminProductBloc - Detail Initial State isError should be false initially
00:00 +7: UC-02: GetProductDetailEvent - Happy Path should emit [detailLoading, detailLoaded] when API succeeds
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +8: UC-02: GetProductDetailEvent - Happy Path should emit detailLoaded with full product data
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +9: UC-02: GetProductDetailEvent - Happy Path should emit detailLoaded with correct price formatting
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +10: UC-02: GetProductDetailEvent - Failure Paths should emit [detailLoading, Error] when NetworkFailure occurs
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail load failed: Network Failure
00:00 +10 -1: UC-02: GetProductDetailEvent - Failure Paths should emit [detailLoading, Error] when NetworkFailure occurs [E]
  Expected: [<<Instance of 'AdminProductDetailLoading'>>, <satisfies function>]
    Actual: [
              AdminProductDetailLoading:AdminProductDetailLoading(),
              AdminProductError:AdminProductError(Network Failure)
            ]
     Which: at location [1] is AdminProductError:<AdminProductError(Network Failure)> which does not match satisfies function
  
  package:matcher                              expect
  package:bloc_test/src/bloc_test.dart 218:16  testBloc.<fn>
  ===== asynchronous gap ===========================
  dart:async                                   _Completer.completeError
  package:bloc_test/src/bloc_test.dart 255:43  _runZonedGuarded.<fn>
  ===== asynchronous gap ===========================
  dart:async                                   _CustomZone.registerBinaryCallback
  package:bloc_test/src/bloc_test.dart 252:5   _runZonedGuarded.<fn>
  dart:async                                   runZonedGuarded
  package:bloc_test/src/bloc_test.dart 251:3   _runZonedGuarded
  package:bloc_test/src/bloc_test.dart 198:11  testBloc
  package:bloc_test/src/bloc_test.dart 156:13  blocTest.<fn>
  
00:00 +10 -1: UC-02: GetProductDetailEvent - Failure Paths should emit [detailLoading, Error] when ServerFailure (500) occurs
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail load failed: 500 Internal Server Error
00:00 +11 -1: UC-02: GetProductDetailEvent - Failure Paths should emit [detailLoading, Error] when product not found (404)
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 999
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail load failed: Product not found
00:00 +12 -1: UC-02: GetProductDetailEvent - Failure Paths should emit [detailLoading, Error] when unauthorized (401)
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail load failed: Unauthorized: Session expired
00:00 +13 -1: UC-02: GetProductDetailEvent - Failure Paths should handle CacheFailure gracefully
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail load failed: Cache error
00:00 +14 -1: UC-02: GetProductDetailEvent - Edge Cases should handle product with all null optional fields
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 6
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 6
00:00 +15 -1: UC-02: GetProductDetailEvent - Edge Cases should handle out of stock product correctly
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 3
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 3
00:00 +16 -1: UC-02: GetProductDetailEvent - Edge Cases should handle low stock product correctly
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 2
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 2
00:00 +17 -1: UC-02: GetProductDetailEvent - Edge Cases should handle zero price product correctly
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 4
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 4
00:00 +18 -1: UC-02: GetProductDetailEvent - Edge Cases should handle large stock quantity correctly
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 5
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 5
00:00 +19 -1: UC-02: GetProductDetailEvent - Edge Cases should handle product with special characters in SKU
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 7
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 7
00:00 +20 -1: UC-02: GetProductDetailEvent - Edge Cases should call use case with correct productId parameter
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: test-id-123
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +21 -1: UC-02: GetProductDetailEvent - Edge Cases should handle product with empty image URL
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +22 -1: UC-02: GetProductDetailEvent - Edge Cases should handle product with inactive status
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +23 -1: Delete Product from Detail Screen should emit [Deleting, Deleted, Loaded] after successful delete (optimistic)
=== DEBUG BLOC: DeleteProductEvent ===
DEBUG: productId: 1
DEBUG: Emitted deleting state
DEBUG: deleteProductUsecase result: Right(true)
DEBUG: Emitted deleted state
00:00 +24 -1: Delete Product from Detail Screen should emit [Deleting, Error] when delete fails
=== DEBUG BLOC: DeleteProductEvent ===
DEBUG: productId: 1
DEBUG: Emitted deleting state
DEBUG: deleteProductUsecase result: Left(ServerFailure(Delete failed))
00:00 +25 -1: Detail State Helper Methods isDetailLoading returns correct value after loading
00:00 +26 -1: Detail State Helper Methods isDetailLoaded returns correct value when loaded
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +27 -1: Detail State Helper Methods isDetailLoading returns true during loading state
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +28 -1: Detail State Helper Methods detailProduct returns correct product after loading
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
00:00 +29 -1: Multiple Product Detail Requests should handle multiple GetProductDetailEvent calls
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 1
DEBUG: current state: AdminProductInitial
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: null
DEBUG: Detail loaded successfully for product: 1
=== DEBUG BLOC: GetProductDetailEvent ===
DEBUG: productId: 2
DEBUG: current state: AdminProductDetailLoaded
DEBUG: _currentlyLoadingProductId: null
DEBUG: _lastLoadedProductId: 1
DEBUG: Already in detail, keeping cache
DEBUG: Detail loaded successfully for product: 2
00:00 +30 -1: Some tests failed.
